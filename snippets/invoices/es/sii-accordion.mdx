import B2CInvoiceMin from '/snippets/invoices/es/sii-b2c.min.mdx';
import B2CInvoice from '/snippets/invoices/es/sii-b2c.mdx';
import B2BInvoiceMin from '/snippets/invoices/es/sii-b2b.min.mdx';
import B2BInvoice from '/snippets/invoices/es/sii-b2b.mdx';
import B2BServicesEUClientMin from '/snippets/invoices/es/sii-b2b-services-eu.min.mdx';
import B2BServicesEUClient from '/snippets/invoices/es/sii-b2b-services-eu.mdx';
import B2BGoodsEUClientMin from '/snippets/invoices/es/sii-b2b-goods-eu.min.mdx';
import B2BGoodsEUClient from '/snippets/invoices/es/sii-b2b-goods-eu.mdx';
import B2BServicesNoEUClientMin from '/snippets/invoices/es/sii-b2b-services-no-eu.min.mdx';
import B2BServicesNoEUClient from '/snippets/invoices/es/sii-b2b-services-no-eu.mdx';
import B2BGoodsNoEUClientMin from '/snippets/invoices/es/sii-b2b-goods-no-eu.min.mdx';
import B2BGoodsNoEUClient from '/snippets/invoices/es/sii-b2b-goods-no-eu.mdx';
import B2BExemptE1InvoiceMin from '/snippets/invoices/es/sii-exempt-E1.min.mdx';
import B2BExemptE1Invoice from '/snippets/invoices/es/sii-exempt-E1.mdx';
import B2COneStopShopInvoiceMin from '/snippets/invoices/es/sii-b2c-oss.min.mdx';
import B2COneStopShopInvoice from '/snippets/invoices/es/sii-b2c-oss.mdx';

<AccordionGroup>
	<Accordion title="B2C Standard Invoice">

		Simplified invoices are used for B2C transactions when the customer is not a business. The transaction amount should be under €400 (VAT included) with some [exceptions](https://sede.agenciatributaria.gob.es/Sede/iva/facturacion-registro/facturacion-iva/tipos-factura.html) in which this threshold is increased to €3,000.

		Notice:

		- the minimal version (`sii-b2c.min.mdx`) contains only the essential fields required to create the simplified invoice,
		- to create a simplified SII invoice, include the `simplified` tag in your GOBL document with the [`es-sii-v1`](https://docs.gobl.org/addons/es-sii-v1) addon,
		- when running `gobl build`, the system automatically calculates totals, assigns the `$regime` to `ES`, sets the [`es-sii-doc-type`](https://docs.gobl.org/addons/es-sii-v1#invoice-type) extension to `F2` (Simplified invoice), applies the standard VAT rate (21%), and normalizes all fields,
		- the built version (`sii-b2c.mdx`) shows the normalized document with calculated totals, line item sums, tax breakdowns, and automatically generated fields, and,
		- there are no totals or calculations in the minimal version; all these will be made automatically when uploading.

		<CodeGroup>
			<B2CInvoiceMin />
			<B2CInvoice />
		</CodeGroup>
	</Accordion>

	<Accordion title="B2B Standard Invoice">

		Regular invoices are used for B2B transactions. Regular invoices must be issued when:

		- The customer is a registered business (has a tax identification number).
		- The transaction amount is €400 VAT included or above, or the customer requires a full invoice.
		- The customer needs a complete invoice with all tax details for accounting or tax purposes.

		Notice:

		- the minimal version (`sii-b2b.min.mdx`) contains only the essential fields required to create the standard B2B invoice,
		- to create a regular SII invoice, include the [`es-sii-v1`](https://docs.gobl.org/addons/es-sii-v1) addon and ensure the `customer` field contains valid tax identification details,
		- the `supplier` must be previously registered with the tax authority and the `customer` NIF or VAT ID must be valid,
		- when running `gobl build`, the system automatically calculates totals, assigns the `$regime` to `ES`, sets the [`es-sii-doc-type`](https://docs.gobl.org/addons/es-sii-v1#invoice-type) extension to `F1` (Standard invoice), applies the standard VAT rate (21%), and normalizes all fields,
		- the built version (`sii-b2b.mdx`) shows the normalized document with calculated totals, line item sums, tax breakdowns, and automatically generated fields, and,
		- there are no totals or calculations in the minimal version; all these will be made automatically when uploading.

		<CodeGroup>
			<B2BInvoiceMin />
			<B2BInvoice />
		</CodeGroup>
	</Accordion>

	<Accordion title="B2B Services EU Client (Reverse Charge)">

		Reverse charge invoices are used for B2B services provided to customers in other EU member states. Reverse charge must be applied when:

		- The customer is a registered business in another EU member state (has a valid EU VAT ID).
		- The service is provided to a business customer (B2B), not a consumer.
		- The service is subject to VAT but the customer accounts for the VAT in their own country.

		Notice:

		- the minimal version (`sii-b2b-services-eu.min.mdx`) contains only the essential fields required to create the reverse charge invoice,
		- to create a reverse charge SII invoice, use the tax key `reverse-charge` in your invoice lines,
		- you also need to set the items `key` to `services`, which will generate a breakdown by operation type required for this type of invoices,
		- with reverse charge, no VAT is charged by the supplier; the customer accounts for VAT in their own country,
		- the `supplier` must be previously registered with the tax authority and the `customer` VAT ID must be valid and registered in the EU VIES system,
		- when running `gobl build`, the system automatically sets the operation type to `S2` (Subject and Not Exempt - With reverse charge) when reporting the document to SII, applies the reverse charge tax treatment, and normalizes all fields,
		- the built version (`sii-b2b-services-eu.mdx`) shows the normalized document with the reverse charge configuration, operation type breakdown, and automatically generated fields, and,
		- there are no totals or calculations in the minimal version; all these will be made automatically when uploading.

		<CodeGroup>
			<B2BServicesEUClientMin />
			<B2BServicesEUClient />
		</CodeGroup>
	</Accordion>

	<Accordion title="B2B Goods EU Client (Intra-Community)">

		Intra-community supply invoices are used for B2B goods delivered to customers in other EU member states. Intra-community supplies must be applied when:

		- The customer is a registered business in another EU member state (has a valid EU VAT ID).
		- Goods are physically delivered to another EU member state.
		- The supply is exempt from VAT in the origin country (Spain) and subject to VAT in the destination country.

		Notice:

		- the minimal version (`sii-b2b-goods-eu.min.mdx`) contains only the essential fields required to create the intra-community supply invoice,
		- to create an intra-community supply SII invoice, use the tax key `intra-community` in your invoice lines,
		- you also need to set the items `key` to `goods`, which will report to SII a breakdown by operation type required for this type of invoices,
		- with intra-community supplies, no VAT is charged in Spain; the customer accounts for VAT in their destination country,
		- the `supplier` must be previously registered with the tax authority and the `customer` VAT ID must be valid and registered in the EU VIES system,
		- when running `gobl build`, the [`es-sii-v1`](https://docs.gobl.org/addons/es-sii-v1) addon automatically sets the [`es-sii-exempt`](https://docs.gobl.org/addons/es-sii-v1#exemption-reason) extension to `E5` ([Artículo 25 Ley de IVA](https://www.boe.es/eli/es/l/1992/12/28/37/con#a25)) and the [`es-sii-regime`](https://docs.gobl.org/addons/es-sii-v1#special-regime-or-relevance-key) extension to `02` (Export),
		- the built version (`sii-b2b-goods-eu.mdx`) shows the normalized document with the intra-community configuration, exemption codes, operation type breakdown, and automatically generated fields, and,
		- there are no totals or calculations in the minimal version; all these will be made automatically when uploading.

		<CodeGroup>
			<B2BGoodsEUClientMin />
			<B2BGoodsEUClient />
		</CodeGroup>
	</Accordion>

	<Accordion title="B2B Services No EU Client (Outside Scope)">

		Outside scope invoices are used for B2B services provided to customers outside the EU.

		Notice:

		- the minimal version (`sii-b2b-services-no-eu.min.mdx`) contains only the essential fields required to create the outside scope invoice,
		- to create an outside scope SII invoice, use the tax key `outside-scope` in your invoice lines,
		- services provided to non-EU customers are generally outside the scope of Spanish VAT,
		- the `supplier` must be previously registered with the tax authority; customer tax identification is optional but recommended for record-keeping purposes,
		- when running `gobl build`, the [`es-sii-v1`](https://docs.gobl.org/addons/es-sii-v1) addon automatically sets the [`es-sii-oot`](https://docs.gobl.org/addons/es-sii-v1#type-of-operation-outside-scope) extension to `location` and normalizes all fields,
		- the built version (`sii-b2b-services-no-eu.mdx`) shows the normalized document with the outside scope configuration and automatically generated fields, and,
		- there are no totals or calculations in the minimal version; all these will be made automatically when uploading.

		<CodeGroup>
			<B2BServicesNoEUClientMin />
			<B2BServicesNoEUClient />
		</CodeGroup>
	</Accordion>

	<Accordion title="B2B Goods No EU Client (Export)">

		Export invoices are used for B2B goods delivered to customers outside the EU.

		Notice:

		- the minimal version (`sii-b2b-goods-no-eu.min.mdx`) contains only the essential fields required to create the export invoice,
		- to create an export SII invoice, use the tax key `export` in your invoice lines,
		- exported goods are exempt from Spanish VAT,
		- the `supplier` must be previously registered with the tax authority; customer tax identification is optional but recommended for record-keeping purposes,
		- when running `gobl build`, the [`es-sii-v1`](https://docs.gobl.org/addons/es-sii-v1) addon automatically sets the [`es-sii-exempt`](https://docs.gobl.org/addons/es-sii-v1#exemption-reason) extension to `E2` ([Artículo 21 Ley de IVA](https://www.boe.es/eli/es/l/1992/12/28/37/con#a21)) and the [`es-sii-regime`](https://docs.gobl.org/addons/es-sii-v1#special-regime-or-relevance-key) extension to `02` (Export),
		- the built version (`sii-b2b-goods-no-eu.mdx`) shows the normalized document with the export configuration, exemption codes, and automatically generated fields, and,
		- there are no totals or calculations in the minimal version; all these will be made automatically when uploading.

		<CodeGroup>
			<B2BGoodsNoEUClientMin />
			<B2BGoodsNoEUClient />
		</CodeGroup>
	</Accordion>

	<Accordion title="B2B Exempt E1 Invoice">

		Exempt `E1` invoices are used for B2B transactions that are exempt from VAT pursuant ([Artículo 20 Ley de IVA](https://www.boe.es/eli/es/l/1992/12/28/37/con#a20)), which covers exemptions in internal operations.

		Notice:

		- the minimal version (`sii-exempt-E1.min.mdx`) contains only the essential fields required to create the exempt E1 invoice,
		- to create an exempt E1 SII invoice, use the tax key `exempt` in your invoice lines,
		- exempt operations are not subject to VAT but must still be reported,
		- the `supplier` must be previously registered with the tax authority and the `customer` NIF must be valid,
		- when running `gobl build`, the [`es-sii-v1`](https://docs.gobl.org/addons/es-sii-v1) addon automatically sets the [`es-sii-exempt`](https://docs.gobl.org/addons/es-sii-v1#exemption-reason) extension to `E1` and normalizes all fields,
		- the built version (`sii-exempt-E1.mdx`) shows the normalized document with the exempt E1 configuration and automatically generated fields, and,
		- there are no totals or calculations in the minimal version; all these will be made automatically when uploading.

		<CodeGroup>
			<B2BExemptE1InvoiceMin />
			<B2BExemptE1Invoice />
		</CodeGroup>
	</Accordion>

	<Accordion title="B2C One-Stop-Shop Invoice">

		One-Stop-Shop (OSS) invoices are used for B2C distance sales of goods and services to consumers in other EU member states when the supplier is registered under the OSS scheme.

		Notice:

		- the minimal version (`sii-b2c-oss.min.mdx`) contains only the essential fields required to create the OSS invoice,
		- to create an OSS SII invoice, include the `simplified` tag in your GOBL document with the [`es-sii-v1`](https://docs.gobl.org/addons/es-sii-v1) addon,
		- OSS allows suppliers to register for VAT in one EU member state and account for VAT on all EU distance sales through that single registration,
		- the `supplier` must be previously registered with the tax authority and enrolled in the OSS scheme,
		- when running `gobl build`, the invoice will be treated as a simplified invoice ([`es-sii-doc-type`](https://docs.gobl.org/addons/es-sii-v1#invoice-type) extension set to `F2`) and VAT is accounted for through the OSS scheme in the destination country,
		- the built version (`sii-b2c-oss.mdx`) shows the normalized document with the OSS configuration and automatically generated fields, and,
		- there are no totals or calculations in the minimal version; all these will be made automatically when uploading.

		<CodeGroup>
			<B2COneStopShopInvoiceMin />
			<B2COneStopShopInvoice />
		</CodeGroup>
	</Accordion>
</AccordionGroup>
