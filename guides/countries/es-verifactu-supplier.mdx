---
title: "VERI*FACTU Supplier onboarding"
sidebarTitle: "Suppliers guide"
description: "Create and register suppliers in Spain with VERI*FACTU."
---

import UnregisterExample from '/snippets/workflows/templates/es/verifactu-unregister.mdx';
import SupplierRegistration from '/snippets/workflows/templates/es/verifactu-supplier-registration.mdx';
import Supplier from '/snippets/suppliers/es/verifactu.mdx';


## Introduction

The Spanish Tax Agency ([AEAT](https://sede.agenciatributaria.gob.es)) requires that companies formally authorize Invopop to issue invoices on their behalf. To comply with this regulation, the supplier's legal representative must sign an agreement granting Invopop the necessary consent to generate and manage invoices in their name. This signed authorization ensures that all invoicing activities carried out by Invopop are legally valid and recognized by the AEAT.

For this process, the supplier can sign the agreement PDF with a valid [digital certificate](https://www.sede.fnmt.gob.es/certificados/persona-fisica), such as one issued by the FNMT, or a handwritten signature with a company stamp (_sello de empresa_), in which case the user must provide a valid ID such as DNI, NIE or passport. In the case of self-employed individuals (_autónomos_) a company stamp is not required.

This guide will walk you through the process of creating the workflows necessary to onboard yourself and/or your suppliers (in a [white-label setup](https://docs.invopop.com/guides/use-cases/white-label)), the process of completing the supplier onboarding wizard, explaining the approval process and what to do in case of rejection.

## Set-up

### Getting started

<Steps>
 <Step title="Connect the VERI*FACTU app">
    1. Go to **Configuration** → **Apps** in the [Console](https://console.invopop.com).
    2. Find **VERI\*FACTU Spain** in the app list.
    3. Click **Connect** to activate the app.

    <Frame caption="Connect the VERI*FACTU app">
      <img
        width="600"
        src="/guides/images/es-verifactu-app.png"
        alt="VERI*FACTU app connected"
      />
    </Frame>

    After connecting, you'll see VERI\*FACTU listed in the Enabled Apps section.

  </Step>
  <Step title="Create a supplier registration workflow">
    Create a new workflow in your workspace for registering suppliers. You should start with the template below:

    <Tabs>
      <Tab title="Template">
        <Card title="VERI*FACTU supplier registration workflow" icon="code-branch" iconType="duotone" href="https://console.invopop.com/redirect/workflows/new?template=es-verifactu-supplier-registration" cta="Add to my workspace">
          This workflow will issue a registration request for a supplier to complete.
        </Card>
      </Tab>
      <Tab title="Code">
        Copy and paste into a new [Empty Party workflow](https://console.invopop.com/redirect/workflows/new?template=empty-party) code view.

        <SupplierRegistration />
      </Tab>
      <Tab title="Build from scratch">
        Before starting, review the [workflows guide](/guides/features/workflows) to understand the general setup process.

        In [Console](https://console.invopop.com), create a new workflow and choose [Empty Party workflow](https://console.invopop.com/redirect/workflows/new?template=empty-party) as the base. Then name the workflow with a descriptive label such as "VERI\*FACTU Supplier Registration".

        The new workflow will need to perform the following steps:

        1. **Register supplier** - will generate a unique URL and add it into a `url` key value within the `meta` property. You would add a webhook after this step to notify the supplier.
        2. **Set State** — select "Processing".
        3. **Wait for supplier registration** - waits for the supplier to upload the required documents (signed agreement and ID). The supplier will be entitled to issue invoices through VERI\*FACTU immediately after the documents are uploaded.
        4. **Set State** — select "Registered".
        5. **Wait for supplier approval** - In live environments, Invopop will review the documents provided by the supplier in less than 72 hours. In sandbox, you can configure the workflow step to accept or reject providers. Open rejection the workflow will error with a `KO` and the reason for rejection can be reviewed in the Supplier or in the executed job. The supplier's invoice issuing entitlement will be revoked immediately.
        6. **Set State** — select "Registered"

        Finally, in the Error Handling area, add the **Set State** action and select `Error`.

        Add any additional steps you may need, and save the new workflow.
      </Tab>
    </Tabs>
  </Step>
</Steps>

### Create a supplier entry

Whether you issue invoices on behalf of third parties ([white label](/guides/use-cases/white-label)) or under your own name, the process is essentially the same. However, we divide the use case here for clarity:

<Tabs>
  <Tab title="Upload and register third-parties">
  <Steps>
    <Step title="Upload a supplier">
      Use the [Create an entry](/api-ref/silo/entries/create-an-entry-put) endpoint to upload a new supplier. Include a [party](https://docs.gobl.org/draft-0/org/party) (you can copy the example below) object in the [data](/api-ref/silo/entries/create-an-entry-put#body-data) field. The required fields are `name` and `tax_id` while `address` and `email` are recommended.

      <Supplier />

    You should see the supplier in the **Parties** section with status `Empty` after creating the entry.

    <Frame caption="Upload supplier to Invopop">
      <img
        width="600"
        src="/guides/images/es-verifactu-supplier-2.png"
        alt="Upload supplier to Invopop"
      />
    </Frame>
  </Step>
  <Step title="Send the supplier to the registration workflow">

    Send the supplier to the registration workflow using the [Create a job](/api-ref/transform/jobs/create-a-job-post) endpoint. Use:

    - The `Silo Entry ID` of the supplier you uploaded on the previous step
    - The Supplier Registration `Workflow ID` from the [Setup](##setup) section

    ***

    The supplier's status will change to `Processing` while waiting for supplier registration and verification. Once these steps are completed successfully, the supplier's status will change to `Registered`. If not successful because the supplier did not complete the process or their documentation was rejected, the status will change to `Error`, and you can inspect the job history of this document to see the reason.

        <Frame caption="Supplier registered successfully">
          <img
            width="600"
            src="/guides/images/es-verifactu-supplier-1.png"
            alt="Supplier registered"
          />
        </Frame>
      </Step>
    </Steps>

  <Warning>If a supplier's agreement documentation is rejected and you need to onboard them again, follow the instructions in [what happens if a supplier validation is rejected](/guides/countries/es-verifactu#what-happens-if-a-supplier-validation-is-rejected)</Warning>
  </Tab>
  <Tab title="Upload and register your company">
    <Steps>
    <Step title="Create your company in the Supplier section">

      We will set up your company as a supplier within Invopop so that we can register it for issuing VERI\*FACTU invoices. First, click on **Suppliers** on the left sidebar and click on the **New Supplier** button at the top right corner of the screen:

      We suggest that you copy and modify our example supplier to your own information, then you can paste it into the editor in **Code View**. Then switch to **Form view** as indicated in the screenshot, this will build and validate the silo entry and, if there are no errors, you'll be able to save your company's information as a Silo Entry.

      <Supplier />

    After saving, you'll see your company in the **Suppliers** section with status `Empty`.

    <Frame caption="Create Supplier in Invopop">
      <img
        width="600"
        src="/guides/images/es-verifactu-supplier-2.png"
        alt="Create Supplier in Invopop"
      />
    </Frame>
  </Step>
  <Step title="Send your company to the registration workflow">

    Locate your company in the **Suppliers** section and tap on "Select Workflow". From the side panel, select the **VERI\*FACTU supplier registration workflow** you created in the [Setup](##setup) section.

    The status will change to `Processing` while waiting for you to upload the required documents. As soon as the documents are uploaded, the state will change to `registered` and it will be possible to issue VERI\*FACTU invoices. However, in the rare case we detect a problem with the documentation provided, we will revoke it and you must follow the instructions in [what happens if a supplier validation is rejected](/guides/countries/es-verifactu#what-happens-if-a-supplier-validation-is-rejected).
        <Frame caption="Supplier registered successfully">
          <img
            width="600"
            src="/guides/images/es-verifactu-supplier-1.png"
            alt="Supplier registered"
          />
        </Frame>
      </Step>
    </Steps>
  </Tab>
</Tabs>

## How VERI\*FACTU supplier registration works

The process is best explained looking at the workflow steps:

    <Frame caption="Supplier Registration Workflow">
      <img
        width="376"
        src="/guides/images/es-verifactu-register-supplier.png"
        alt="Supplier Registration Workflow"
      />
    </Frame>

    1. **Register supplier** will generate a unique URL and add it into a `url` key value within the `meta` property. You would add a webhook after this step to notify the supplier.
    2. **Set State to Processing** labels the silo entry so you know it's in process of registration.
    3. **Wait for supplier registration** waits for the supplier to upload the required documents (signed agreement and ID). The supplier will be entitled to issue invoices through VERI\*FACTU immediately after the documents are uploaded.
    4. **Set State to Registered** labels the silo entry so you know registration is complete.
    5. **Wait for supplier approval** In live environments, Invopop will review the documents provided by the supplier in less than 72 hours. In sandbox, you can configure the workflow step to accept or reject providers. Open rejection the workflow will error with a `KO` and the reason for rejection can be reviewed in the Supplier or in the executed job. The supplier's invoice issuing entitlement will be revoked immediately.

    <Note>In sandbox "Wait for supplier approval" can be configured to accept or reject suppliers. Re-running the workflow will not change the approval outcome, the supplier must be unregistered first.</Note>


## Register a Supplier

Suppliers need to provide the following documents for Invopop to issue invoices on their behalf:

1. A signed [direct representation agreement](https://sede.agenciatributaria.gob.es/static_files/Sede/Procedimiento_ayuda/ZC01/Mod/Anexo_I_mod_otorg_prof_trib.pdf). If the supplier is a self-employed individual (_autónomo_), stamping is unnecessary.
2. A copy of signatory's fiscal ID (DNI/NIE or passport in the case of non-residents) if the agreement is not signed with a valid [digital certificate](https://www.sede.fnmt.gob.es/certificados/persona-fisica) such as one from the FNMT.

These documents can be collected through a multi-step web form (_wizard_) which enabled through the _Supplier registration workflow_ created during [VERI\*FACTU Invoicing setup](/guides/countries/es-verifactu) or [sent via the API](https://docs.invopop.com/api-ref/apps/verifactu/agreement-upload) if you wish to have control over the process.

### Onboard suppliers through the supplier registration wizard

The supplier registration wizard walks you (or your customers) through the necessary legal requirements to issue VERI\*FACTU invoices. Each issuer must submit a signed representation agreement between Invopop and the issuer, along with documentation proving their legal authority to enter into such an agreement.

This wizard can be embedded as an iframe to onboard your customers without leaving your product or platform.

<Steps>
  <Step title="Welcome screen">
    <Frame>
      <img
        width="400"
        src="/guides/images/es-verifactu-supplier-wizard-1.png"
        alt="Supplier registration wizard"
      />
    </Frame>
    Your customers will be met with the first page detailing the necessary documentation required for the process.
  </Step>
  <Step title="Information verification">
    <Frame>
      <img
        width="400"
        src="/guides/images/es-verifactu-supplier-wizard-2.png"
        alt="Supplier registration wizard"
      />
    </Frame>
    The user can edit personal or company information. If the user is a self-employed individual, only the company information block will appear. Such individuals should enter their real name in the "Nombre" field, as this is matched by the AEAT against their tax id.
  </Step>
  <Step title="Download agreement">
    <Frame>
      <img
        width="400"
        src="/guides/images/es-verifactu-supplier-wizard-3.png"
        alt="Supplier registration wizard"
      />
    </Frame>
    On the following page, the issuer can download and sign their agreement. The details from the previous page will auto-populate into the contract.

    The issuer (you, or your customer) will require the following:

    1. **Self-employed individuals (autónomos)**
        - Signed agreement (handwritten signature or e-signature with the [FNMT's Certificado Electrónico de Ciudadano](https://www.sede.fnmt.gob.es/certificados/persona-fisica))
        - National ID (DNI/NIE) if handwritten signature.
    2. **Companies**
        - Signed agreement (handwritten signature or e-signature with the [FNMT's Certificado Electrónico de Representante](https://www.sede.fnmt.gob.es/certificados/certificado-de-representante/persona-juridica))
        - If handwritten signature, legal representative's ID (DNI/NIE/passport) and company stamp.

    Please be advised that any certificate that is not issued by the FNMT is not valid. Self-signed and certificates issued by other authorities are not considered valid.

  </Step>
  <Step title="Upload signed agreement">
    <Frame>
      <img
        width="400"
        src="/guides/images/es-verifactu-supplier-wizard-4.png"
        alt="Supplier registration wizard"
      />
    </Frame>
    Issuers select the type of signature they used and upload their document. If digital signature is selected, the following step will be skipped as a signature through a FNMT digital certificate counts as a proof of identification.
  </Step>

  <Step title="Upload ID">
    <Frame>
      <img
        width="400"
        src="/guides/images/es-verifactu-supplier-wizard-5.png"
        alt="Supplier registration wizard"
      />
    </Frame>
    The legal representative or _autónomo_ upload a scan or clear photo of their ID in a valid image format (JPG or PNG). The ID should ideally be a DNI/NIE, as passports are only used when the person is not entitled to have one.

    Both the front and reverse of the ID should be submitted here. If the ID is a passport (only valid for non-Spanish residents who are representatives of a company), they can upload the main page of their passport both times.
  </Step>

  <Step title="Review details">
    <Frame>
      <img
        width="400"
        src="/guides/images/es-verifactu-supplier-wizard-6.png"
        alt="Supplier registration wizard"
      />
    </Frame>
    This page provides a summary of information so the user can verify they have submitted the correct data. Any corrections can be easily made through the edit function.
  </Step>

  <Step title="Confirmation screen">
    <Frame>
      <img
        width="400"
        src="/guides/images/es-verifactu-supplier-wizard-7.png"
        alt="Supplier registration wizard"
      />
    </Frame>
    A green checkmark will indicate success, and the supplier will await approval from our team, which will be made in less than 72 hours.
  </Step>

</Steps>

### Onboard suppliers through the API

If you have special needs regarding the onboarding of suppliers for VERI\*FACTU (such as using third party identity verification services), it's possible to implement your own onboarding process through the API. The process would be the following:

<Steps>
  <Step title="Upload supplier">
    [Create entry](https://docs.invopop.com/api-ref/silo/entries/create-an-entry-put)<br />
    `/silo/v1/entries/{id}`<br />
    Besides the supplier's basic information, the entry should contain a `people` object containing a [person](https://docs.gobl.org/draft-0/org/person) who will act as the legal representative of the supplier.
  </Step>
  <Step title="Create a job with the supplier registration workflow">
    [Create a job](/api-ref/transform/jobs/create-a-job-put)<br />
    `https://api.invopop.com/transform/v1/jobs/{id}`<br />
    The same workflow is used for API onboarding
  </Step>
  <Step title="Generate the agreement PDF">
    [Generate agreement PDF](/api-ref/apps/verifactu/agreement-fetch)<br />
    `apps/verifactu/v1/entry/:silo_entry_id/agreement`<br />
    The agreement file will be created with the supplier's data.
  </Step>
  <Step title="Upload documents">
    [Upload agreement PDF](/api-ref/apps/verifactu/agreement-upload)<br />
    `apps/verifactu/v1/entry/:silo_entry_id/agreement`<br />
    Upload the agreement into the supplier's silo entry.

    [Upload identity images](/api-ref/apps/verifactu/identity-upload)<br />
    `apps/verifactu/v1/entry/:silo_entry_id/identity`<br />
    Upload the ID into the supplier's silo entry (can be DNI, NIE or Passport).
  </Step>
  <Step title="Confirm upload">
    [Confirm](/api-ref/apps/verifactu/confirm) `https://api.invopop.com/apps/verifactu/v1/entry/:silo_entry_id/confirm`<br />
    Call this endpoint to confirm that everything has been prepared correctly and the supplier is ready to start operating.
  </Step>
</Steps>

## Unregister a supplier

Unregistering a supplier is essentially revoking their invoice issuing priviledges. You might need to unregister an entity because the supplier is no longer your client, because their agreement documentation was rejected, or because of a change in their Tax ID. To do so, use the following workflow template:

  <Tabs>
      <Tab title="Template">
        <Card title="VERI*FACTU unregister supplier" icon="code-branch" iconType="duotone" href="https://console.invopop.com/redirect/workflows/new?template=es-verifactu-invoice" cta="Add to my workspace">
          This workflow will revoke invoice issuing privileges for a VERI\*FACTU supplier.
        </Card>
      </Tab>
      <Tab title="Code">
        Copy and paste into a new [Empty Party workflow](https://console.invopop.com/redirect/workflows/new?template=empty-invoice) code view.

        <UnregisterExample />
      </Tab>
      <Tab title="Build from scratch">
        In [Console](https://console.invopop.com) create a new workflow and select [Empty Party workflow](https://console.invopop.com/redirect/workflows/new?template=empty-invoice) in the template selector, then add the following steps:

        1. **Unregister supplier** - Revokes invoice issuing authorization by the AEAT.
        2. **Set State** - Select `void` to label the supplier accordingly.

        In the Error Handling section, add the **Set State** action and select `Error`.

      </Tab>
    </Tabs>

## FAQ

<AccordionGroup>


  <Accordion title="What are the most common reasons for failing supplier approval?">
    We reject agreements when:

    - The uploaded document is not signed (they upload the unsigned template).
    - Users upload a handwritten signature without and ID.
    - The electronic signature is made with an FNMT certificate.
    - The agreement is missing a date or location.
    - The name is entered as an email address.

    The job will state the reason for rejection.
  </Accordion>

  <Accordion title="What happens if a supplier does not complete their registration within the allotted wait time?">
    A KO will be triggered and the supplier will be labelled with the `Error` state. We currently recommend sending a reminder to the supplier through a webhook.

    The registration link will not expire and the entity will still be able to upload their registration documents which will be validated. Should you choose to run this workflow again using this supplier, the supplier will be accepted or rejected immediately because the required documentation has already been provided and validated.
  </Accordion>
  <Accordion title="What happens if a supplier validation is rejected?">
    If the uploaded agreement documents were rejected, a KO will be triggered and the supplier will be labelled with the `Error` state. We currently recommend sending a notification to the supplier through a webhook within the **Error Handling** section.

    Afterwards, if you wish to re-register the supplier with new documents, you must:

    1. Unregister the supplier using the [Unregister Supplier workflow](/guides/countries/es-verifactu#template-3).
    2. Re-run the Register supplier workflow.

    This will restart the entire registration process. When uploading documents, the previously submitted agreement will appear selected by default. Simply choose a new file and click `Continue` to override the old one. See the image below for reference:

    <Frame caption="Overriding the previously submitted agreement">
      <img
        width="600"
        src="/guides/images/es-verifactu-update-agreement.png"
        alt="Overriding the previously submitted agreement"
      />
    </Frame>
  </Accordion>
  <Accordion title="What is the minimum information required to register a supplier?">
    In order to complete the representation agreement you will need to provide the following information:

    #### Company
    1. Name
    2. CIF
    3. Address

    #### Legal representative
    1. Full name
    2. Government ID type and number
    3. Address

    If the entity is an self-employed individual (_autónomo_), only the information requested in in the **Legal representative** section is required.

  </Accordion>
  <Accordion title="What methods are available to sign the PDF supplier agreements?">
    The supplier can add their electronic signature to the PDF document ([instructions](https://helpx.adobe.com/acrobat/using/signing-pdfs.html)), or sign with a handwritten signature (we recommend using [Adobe's online service](https://www.adobe.com/acrobat/online/sign-pdf.html).
  </Accordion>
  <Accordion title="What is the file size limit for the documents provided in the supplier registration flow">
    Individual documents are limited to a maximum size of 10MB. Uploads exceeding this size will result in an error.
  </Accordion>

</AccordionGroup>
