---
title: "Italy - SDI: Receiving Invoices"
description: "Receive and process electronic invoices from Italy's SDI system"
---

## Introduction

In Italy, electronic invoicing is mandatory for all businesses. The Sistema di Interscambio (SDI) is the Italian government's electronic invoicing system that acts as the central hub for transmitting, validating, and delivering all electronic invoices in the country. FatturaPA is the standardized XML format required for all electronic invoices in Italy, ensuring that invoices contain all required information and follow strict validation rules set by the Italian tax authority (Agenzia delle Entrate).

---*Visual representation of the SDI system and how electronic invoices flow between businesses in Italy*---

Invopop simplifies SDI integration by allowing you to work with GOBL format instead of complex XML, providing synchronous validation before submission, and offering a simple API integration with automatic handling of SDI notifications and status updates. For sending invoices through SDI, see our companion guide: [Italy - SDI: Sending Invoices](/guides/it-sdi-sending).

## Setup

<Steps>
<Step title="Connect the SDI Italy app">
1. Navigate to **Configuration** > **Apps**
2. Locate **SDI Italy** in the app discovery list
3. Click **Connect** to activate

---*Screenshot of the Apps page with SDI Italy highlighted*---

Unlike sending, receiving invoices requires additional configuration after the initial connection.
</Step>

<Step title="Configure receiving workflows">
For receiving invoices, two workflows must be set up:

1. **Customer Registration** workflow with:
   - **Register SDI Customer (Italy)** - Registers a company's tax ID to receive invoices through SDI.

2. **Import Invoices** workflow with:
   - **Import from SDI (Italy)** - Converts received FatturaPA documents into GOBL format.

---*Screenshot of workflow configuration with the essential steps highlighted*---
</Step>

<Step title="Configure app for receiving invoices">
Additional app configuration is required to process incoming invoices:

1. Navigate to **Configuration** > **Apps**
2. Find the **SDI Italy** app and click **Configure**
3. In the sidebar that opens, select the appropriate **Import Invoices** workflow
4. This workflow will automatically trigger whenever a new invoice is received through SDI

---*Screenshot of the SDI Italy app configuration panel*---

Any errors in the import process will trigger the rescue steps in the workflow, allowing identification and resolution of issues.
</Step>

<Step title="Register with Italian tax authority">
For each company you want to receive invoices for in Invopop, you must register the Recipient Code (Codice Destinatario) with the Italian tax authority:

1. Access the Italian tax authority's website (https://ivaservizi.agenziaentrate.gov.it/portale/) and log in with valid credentials for the company being registered
2. Click on the "Fatture e Corrispettivi" section
3. In the box "Fatturazione elettronica," click on "Registrazione delle modalit√† di ricezione della fattura elettronica"
4. Select the Recipient Code (Codice Destinatario) option and enter the code `JKKZDGR` provided by Invopop
5. Click on "Conferma"

---*Screenshot of the Italian tax authority website registration process*---

After completing this registration with the tax authority, execute the Customer Registration workflow in Invopop to complete the setup for that company.

<Info>
Important: Both steps must be completed for each company:
1. Register the Codice Destinatario `JKKZDGR` with the Italian tax authority for that company
2. Run the Customer Registration workflow for that company in Invopop

Registration is only required for receiving invoices, not for sending them.
</Info>
</Step>
</Steps>

<AccordionGroup>
<Accordion title="Example Customer Registration Workflow">
Use this workflow to register a company to receive invoices through SDI.

```json
{
    "name": "Register SDI Customer",
    "description": "Register a company to receive invoices through SDI",
    "steps": [
        {
            "id": "2a34f560-fd13-11ef-998c-e97f18c9212e",
            "name": "Set State",
            "provider": "silo.state",
            "summary": "Set state to `processing`{.state .processing}",
            "config": {
                "state": "processing"
            }
        },
        {
            "id": "3b5c7890-fd13-11ef-998c-e97f18c9212e",
            "name": "Register SDI Customer (Italy)",
            "provider": "sdi-it.register",
            "summary": "Register company as receiver",
            "config": {
                "environment": "production"
            }
        },
        {
            "id": "4c6d8910-fd13-11ef-998c-e97f18c9212e",
            "name": "Set State",
            "provider": "silo.state",
            "summary": "Set state to `registered`{.state .registered}",
            "config": {
                "state": "registered"
            }
        }
    ],
    "rescue": [
        {
            "id": "5d7e9a20-fd13-11ef-998c-e97f18c9212e",
            "name": "Set State",
            "provider": "silo.state",
            "summary": "Set state to `error`{.state .error}",
            "config": {
                "state": "error"
            }
        }
    ]
}
```
</Accordion>

<Accordion title="Example Import Invoices Workflow">
Use this workflow to import and process invoices received through SDI. This workflow must be selected in the SDI Italy app configuration to automatically process incoming invoices.

```json
{
    "name": "Import SDI Invoices",
    "description": "Import and process invoices received through SDI",
    "steps": [
        {
            "id": "6e8f0b30-fd13-11ef-998c-e97f18c9212e",
            "name": "Import from SDI (Italy)",
            "provider": "sdi-it.import",
            "summary": "Convert received FatturaPA to GOBL",
            "config": {
                "environment": "production"
            }
        },
        {
            "id": "7f9a1c40-fd13-11ef-998c-e97f18c9212e",
            "name": "Generate PDF",
            "provider": "pdf",
            "summary": "Italian",
            "config": {
                "date_format": "%Y-%m-%d",
                "locale": "it",
                "logo_height": 40
            }
        },
        {
            "id": "8a0b2d50-fd13-11ef-998c-e97f18c9212e",
            "name": "Set State",
            "provider": "silo.state",
            "summary": "Set state to `sent`{.state .sent}",
            "config": {
                "state": "sent"
            }
        }
    ],
    "rescue": [
        {
            "id": "9b1c3e60-fd13-11ef-998c-e97f18c9212e",
            "name": "Set State",
            "provider": "silo.state",
            "summary": "Set state to `error`{.state .error}",
            "config": {
                "state": "error"
            }
        }
    ]
}
```
</Accordion>
</AccordionGroup>

## Receiving Invoices

Invopop uses the [GOBL FatturaPA](https://github.com/invopop/gobl.fatturapa) library to process conversions, automatically converting received FatturaPA XML documents into GOBL format.

Detailed information about the SDI-specific extensions and validations can be found in:
- [Italy SDI FatturaPA v1.x Addon Documentation](https://docs.gobl.org/addons/it-sdi-v1)
- [Italy Tax Regime Documentation](https://docs.gobl.org/regimes/it)

### How the process works

<Steps>
<Step title="Register with Italian tax authority">
Register the Recipient Code `JKKZDGR` with the Italian tax authority for each company that needs to receive invoices, as outlined in the setup steps.
</Step>

<Step title="Set up the Customer Registration workflow">
Run this workflow for each company that needs to receive invoices. This registers the company's tax ID with our SDI integration partner to subscribe to invoice events for that organization.
</Step>

<Step title="Configure the app for import">
Select the Import Invoices workflow in the SDI Italy app configuration to automatically process incoming invoices.
</Step>

<Step title="Process received invoices">
Once registered, any invoices addressed to the registered companies with the Recipient Code will be automatically received and processed through the Import Invoices workflow configured in the app settings.

The import process uses the open-source library gobl.fatturapa to convert FatturaPA documents into GOBL format, making them accessible within the Invopop workspace like any other document.

If errors occur during the import process, they will trigger the rescue steps in the workflow, allowing users to check what went wrong and take appropriate action.
</Step>
</Steps>

---*Process flow diagram showing the steps from registration to receiving invoices*---

## FAQ

<AccordionGroup>
<Accordion title="Is electronic invoicing mandatory in Italy?">

Yes, electronic invoicing through SDI is mandatory in Italy for B2G, B2B, and B2C transactions.

All invoices must be issued in FatturaPA format and transmitted through the SDI (Sistema di Interscambio) platform.

</Accordion>
<Accordion title="What happens if a received invoice contains errors?">

If an invoice received through SDI contains errors:

1. The import process will still attempt to convert it to GOBL format
2. Any validation errors will be logged, and the rescue steps in your workflow will be triggered
3. You can review the errors and decide how to handle the invoice

If the invoice has significant structural issues that prevent conversion, you may need to contact the sender to request a corrected invoice.

</Accordion>
<Accordion title="How quickly are invoices received after being sent by suppliers?">

Invoices are typically received within minutes after being sent by suppliers through SDI. The automatic import process in Invopop processes them as soon as they are received by our system.

</Accordion>
<Accordion title="Can I register multiple companies to receive invoices?">

Yes, multiple companies can be registered to receive invoices through a single Invopop workspace. For each company, you must:
1. Register the Recipient Code `JKKZDGR` with the Italian tax authority for that specific company
2. Have its tax ID registered using the Customer Registration workflow in Invopop
3. Use the same Import Invoices workflow configured in the app settings

This two-step registration process (with the tax authority and with Invopop) must be completed for each company you want to register. This is particularly useful for white-labeling scenarios where a user manages multiple entities.

</Accordion>
<Accordion title="Can I use the same workflow for both sending and receiving invoices?">

No, sending and receiving invoices require different workflows:
- For sending invoices, a workflow with the Generate FatturaPA and Send to SDI steps is needed
- For receiving invoices, two workflows are required: 
  1. A Customer Registration workflow (run once for each company that needs to receive invoices)
  2. An Import Invoices workflow (configured to run automatically)

For more information on sending invoices, see our [Italy - SDI: Sending Invoices](/guides/it-sdi-sending) guide.

</Accordion>
<Accordion title="What is the difference between registering with the tax authority and registering with Invopop?">

The two-step registration process serves different purposes:

1. **Registering with the Italian tax authority** - Tells SDI to route invoices addressed to your company to Invopop's system using the Codice Destinatario `JKKZDGR`.

2. **Registering with Invopop** (Customer Registration workflow) - Tells Invopop's system which invoices to accept and process for your workspace.

Both steps are necessary: the first routes the invoices to Invopop, and the second ensures Invopop knows which workspace should receive those invoices.

</Accordion>
</AccordionGroup> 