---
title: "Email Guide"
sidebarTitle: "Guide"
icon: "envelope"
description: An application to send emails from your workflows, with or without attachments.
---

## Introduction

This guide will show you how to set up the Email app and its associated workflow actions for emailing invoices or sending notifications. Included in this guide is a step-by-step configuration process, authentication settings, message customization, and usage of email providers or SMTP servers.

## Prerequisites

You can send emails from `Company name <email@invopop.com>` by simply connecting the Email app.

If you wish to send emails from your own domain such as `Company Name <name@yourdomain.com>`, you will need one of the following:

- A [Resend](https://resend.com) account with a [verified domain](https://resend.com/docs/dashboard/domains/introduction#verifying-a-domain)
- A [Sendgrid](https://resend.com) account with an [authenticated domain](https://www.twilio.com/docs/sendgrid/ui/account-and-settings/how-to-set-up-domain-authentication)
- An SMTP server which is authorized to send emails from your domain ([Gmail](https://support.google.com/a/answer/176600?hl=en), [iCloud](https://support.apple.com/en-us/102525), [Amazon SES](https://docs.aws.amazon.com/ses/latest/dg/send-email-smtp.html))

<Warning>In the case of SMTP delivery we strongly recommended to use an _app password_ or _token_ if your service provider allows it. This is the best security practice because it allows you to revoke authorization at any time, even if you lose access to Invopop.</Warning>


## Setup

<Steps>

<Step title="Connect the Email app.">
Head over to `Configuration â†’ Apps`, and find `Email` from the list of apps to discover. Tap the **Connect** button to enable.

    <Frame>
      <img
        width="388"
        src="/guides/images/email-connect.png"
        alt="Email app connected"
      />
    </Frame>

</Step>

<Step title="Add Senders">

After connecting the Email app, click on `Configure`. You will find a pre-defined email address `Invopop Email <email@invopop.com>`. Editing this email address will allow you to customize the Sender name, allowing you to send emails with your company name `Company Name <email@invopop.com>`.

You can add as many senders as you need by tapping on the `Add` button. Email providers other than Invopop will allow you to use your own domain name (after it's configured with the email provider).

</Step>


<Step title="Set up your workflow">

Whether you start from an existing or new workflow, make sure that you add the `Send Email` step after you have issued an invoice via the corresponding tax authority and generated a PDF (if required). This will ensure the necessary files are attached, and that the invoice complies with local regulatory requirements.

<img src="https://assets.invopop.com/docs/email/email-screen2.png" width="100%" alt="Workflow with email actions" />

If you simply want to send a `Notification via Email`, this suggestion does not apply, as no files are attached.

</Step>


</Steps>

## Workflow actions

The Email app adds two items to your workflow action list:

1. **Send Email**: this action will attach the files associated with a silo entry, and is mainly used for sending invoices to customers or other recipients.
2. **Notify via Email**: this action will _not_ attach files, and is meant for sending messages such as notifications or failures.

## Workflow step configuration

    <Frame>
      <img
        width="100%"
        src="/guides/images/email-configuration.png"
        alt="VERI*FACTU app connected"
      />
    </Frame>

**Sender**<br />
Here you will find Senders which were added in the Email app configuration. A sender can be thought of as a person or company name and email address.

**To**<br />
Check `Automatically add invoice customers` if you wish to send the invoice as an attachment to the customer. This is usually the case for B2C workflows. If you wish to send the email with attachments to a specific address, tap on the `Add` button and write an address in the email field.

**BCC**<br />
BCC stands for _Blind Carbon Copy_, and is used when you do not want the recipients in this field to appear in the message header. Other recipients won't know that a copy was sent to these addresses. This is useful to send a copy of the invoice to yourself, for example.

**Reply To**<br />
The "Reply To" field requires a valid email address where recipients' responses will be directed. This field determines where replies go, regardless of the sending address.

**Subject**<br />
The email subject field is a brief heading that summarizes your message's purpose. This field allows you to use template variables in order to customize the subject for the recipient.

<Tip>
  For maximum effectiveness, keep it clear and specific (e.g., "Invoice #12345 from Acme Inc."). Many email clients display only the first 60-70 characters of a subject, so prioritize key information at the beginning.
</Tip>

**Body**<br />
The email body textarea is where you compose your message's main content. This field allows template variables and will preserve whitespace.

**Combine attachments into a single zip file**<br />
It's possible that your workflow generates several files per invoice (sometimes an XML and a PDF file are required by legislation). This option allows you to combine and compress all files into a single `.zip` file.

***

## Custom Template Variables with Job Args

In addition to the predefined variables available in the **Insert variable** menu, you can inject custom variables into your email templates using job args. This is particularly useful for dynamic content like payment links, conditional text, and other external data.

### How It Works

When [using the API to run a workflow](https://docs.invopop.com/api-ref/transform/jobs/create-a-job-put) you pass an `args` data object with custom variables you want to inject into your email. You will then introduce the variable into the email's subject or body with the following syntax: `{{args.variable_name}}`. If you need to provide a fallback in case the variable is not present, we recommend using the following syntax: `{{ or args.value "Default value" }}`.


### Example: Adding a Payment Link

Let's say you want to send an email with a custom payment link. Here's how to set it up:

<Steps>
  <Step title="Configure your email template">
    In the email body field you can use both UI variables (in this case `Customer Name` and `Full Code`) and custom variables `{{args.payment_link}}`.
    <Frame caption="Body field example with custom arguments">
      <img
        width="395"
        src="/guides/images/email-body.png"
        alt="VERI*FACTU app connected"
      />
    </Frame>

  </Step>

  <Step title="Execute the job with custom args">

     Arguments (`args`) are key-value pairs tailored to specific applications, in this case we are creating a `payment_link` which will be available to the Email App. [Create the job via API](api-ref/transform/jobs/create-a-job-put) with the proper payload: 

    ```json
      {
        "content_type": "application/json",
        "silo_entry_id": "...",
        "workflow_id": "...",
        "args": {
          "payment_link": "https://your-payment-link.com"
        }
      }
    ```
  </Step>
  <Step title="Verify result">
    The email recipient should receive an email with the following content:

    ```
    Hello John Doe,

    Your invoice INV-2025-001 is attached to this email.

    You can pay it here: https://your-payment-link.com

    Best regards,
    Invopop
    ```
  </Step>
</Steps>

<Info>
 **Key Points**
- Use `{{args.variable_name}}` syntax in email templates for custom variables
- Include the same variable names in the `args` object when executing the job via API
- Custom variables work in both email body and subject fields
- Variable names must match exactly between template and API payload
</Info>

**FAQ**

<AccordionGroup>
<Accordion title="Is Email in Sandbox limited in any way?">

We strive to make our sandbox workspaces as similar to our live workspaces as possible. However, in order to prevent abuse and email mistakes, the following differences should be observed in Sandbox:

* Emailing customers is disabled in sandbox workspaces.
* Emailing suppliers is disabled in sandbox workspaces.
* Invoice PDFs will have a "Sample" watermark.
* `[Invopop Test]` will be prepended to the subject.

</Accordion>
<Accordion title="How do I set up Gmail as my SMTP server">
Follow [the instructions in this support guide](https://support.google.com/a/answer/176600?hl=en). Setting up an SMTP relay allows you more fine-grained control over your email needs and has the largest quota (up to 10,000 recipients per day); but can only be set up by an account administrator.

Gmail's SMTP server allows up to 2,000 emails per day. It can be set up by an end-user by creating an [app password](https://support.google.com/mail/answer/185833) and using the set-up configuration listed in the Google support guide.
</Accordion>

<Accordion title="How do I set up iCloud Mail">
Follow the instructions found in [iCloud Mail server settings for other email client apps](https://support.apple.com/en-us/102525).
</Accordion>
<Accordion title="How do I set up Microsoft 365">
Follow the instructions found in [How to set up a multifunction device or application to send emails using Microsoft 365 or Office 365](https://learn.microsoft.com/en-us/exchange/mail-flow-best-practices/how-to-set-up-a-multifunction-device-or-application-to-send-email-using-microsoft-365-or-office-365)
</Accordion>
<Accordion title="How do I set up Amazon SES">
Follow the instructions found in [Using the Amazon SES SMTP interface to send email](https://docs.aws.amazon.com/ses/latest/dg/send-email-smtp.html)
</Accordion>
<Accordion title="My custom variable displays as <no value>">
 This means the job's `args` key/value pair was not set. Ensure that you pass a value, even if it's empty:

     ```json
      {
        "content_type": "application/json",
        "silo_entry_id": "...",
        "workflow_id": "...",
        "args": {
          "payment_link": ""
        }
      }
    ```

Alternatively, you can handle undefined `args` by using a fallback:

```
{{or args.variable_name "Default value"}}
``` 
</Accordion>
</AccordionGroup>
